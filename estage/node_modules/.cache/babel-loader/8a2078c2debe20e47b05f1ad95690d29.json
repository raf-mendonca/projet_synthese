{"ast":null,"code":"import _objectSpread from\"C:/Users/raped/eStageGit/eStage/projet_synthese/estage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/raped/eStageGit/eStage/projet_synthese/estage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/raped/eStageGit/eStage/projet_synthese/estage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/raped/eStageGit/eStage/projet_synthese/estage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/raped/eStageGit/eStage/projet_synthese/estage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";//Rafael de Mendonça\n//Date: 2021-04-04\nimport React,{Component}from\"react\";import\"bootstrap/dist/css/bootstrap.min.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var headerProps={icon:\"users\",title:\"Utilisateur\",subtitle:\"CRUD\"};//local de la bd\nvar baseUrl=\"http://localhost:8000/users\";// Inicialiser le state\nvar initialState={user:{nom:\"\",domaine:\"\",experience:\"\",motivation:\"\",email:\"\"},list:[]};var Inscription=/*#__PURE__*/function(_Component){_inherits(Inscription,_Component);var _super=_createSuper(Inscription);function Inscription(){var _this;_classCallCheck(this,Inscription);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state=_objectSpread({},initialState);return _this;}_createClass(Inscription,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;axios(baseUrl).then(function(resp){_this2.setState({list:resp.data});});}// lorsque'on click sur soumission ou annuler on réinicialise le formulaire\n},{key:\"clear\",value:function clear(){this.setState({user:initialState.user});}// function utilisé pour additionner un neuvel utilisateur et modifier un utilisateur qui existe\n},{key:\"save\",value:function save(){var _this3=this;var user=this.state.user;var method=user.id?\"put\":\"post\";//Si il y a un id = put pour modifier, sinon post pour créer\nvar url=user.id?\"\".concat(baseUrl,\"/\").concat(user.id):baseUrl;// Si put passer le id à url\naxios[method](url,user).then(function(resp){var list=_this3.getUpdatedList(resp.data);//rest.data = utilisateur obtenu à partir du json server\n_this3.setState({user:initialState.user,list:list});});}},{key:\"getUpdatedList\",value:function getUpdatedList(user){var add=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;// function qui reçoive le utilisateur obtenue de data.json ou du backend\nvar list=this.state.list.filter(function(u){return u.id!==user.id;});//filter créa une nouvelle liste\nif(add)list.unshift(user);//unshift met un élement obtenue dans la premiàre position de la liste/array\nreturn list;}},{key:\"updateField\",value:function updateField(event){var user=_objectSpread({},this.state.user);user[event.target.name]=event.target.value;this.setState({user:user});}},{key:\"renderForm\",value:function renderForm(){var _this4=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"nom\",value:this.state.user.nom,onChange:function onChange(e){return _this4.updateField(e);},placeholder:\"Digitez votre nom...\",title:\"input1\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Domaine\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"domaine\",value:this.state.user.domaine,onChange:function onChange(e){return _this4.updateField(e);},placeholder:\"Digitez votre domaine...\",title:\"input2\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Exeperience\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"experience\",value:this.state.user.experience,onChange:function onChange(e){return _this4.updateField(e);},placeholder:\"Informez si vous avez d'exp\\xE9rience...\",title:\"input3\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Motivation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"motivation\",value:this.state.user.motivation,onChange:function onChange(e){return _this4.updateField(e);},placeholder:\"Quel est votre motivation...\",title:\"input4\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"email\",value:this.state.user.email,onChange:function onChange(e){return _this4.updateField(e);},placeholder:\"Digitez votre courriel...\",title:\"input5\"})]})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-custom btn-lg\",onClick:function onClick(e){return _this4.save(e);},children:\"Soumettre\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-custom-warm btn-lg ml-2\",onClick:function onClick(e){return _this4.clear(e);},children:\"Annuler\"})]})})]});}},{key:\"load\",value:function load(user){this.setState({user:user});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{id:\"ajouter-stage\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Enregistrement d'un nouvel utilisateur\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:this.renderForm()})]})})})});}}]);return Inscription;}(Component);export{Inscription as default};","map":{"version":3,"sources":["C:/Users/raped/eStageGit/eStage/projet_synthese/estage/src/views/inscription.jsx"],"names":["React","Component","axios","headerProps","icon","title","subtitle","baseUrl","initialState","user","nom","domaine","experience","motivation","email","list","Inscription","state","then","resp","setState","data","method","id","url","getUpdatedList","add","filter","u","unshift","event","target","name","value","e","updateField","save","clear","renderForm"],"mappings":"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","sourcesContent":["//Rafael de Mendonça\r\n//Date: 2021-04-04\r\nimport React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport axios from \"axios\";\r\n\r\nconst headerProps = {\r\n  icon: \"users\",\r\n  title: \"Utilisateur\",\r\n  subtitle: \"CRUD\",\r\n};\r\n//local de la bd\r\nconst baseUrl = \"http://localhost:8000/users\";\r\n// Inicialiser le state\r\nconst initialState = {\r\n  user: { nom: \"\", domaine: \"\", experience: \"\", motivation: \"\", email: \"\" },\r\n  list: [],\r\n};\r\n\r\nexport default class Inscription extends Component {\r\n  state = { ...initialState };\r\n\r\n  componentWillMount() {\r\n    axios(baseUrl).then((resp) => {\r\n      this.setState({ list: resp.data });\r\n    });\r\n  }\r\n  // lorsque'on click sur soumission ou annuler on réinicialise le formulaire\r\n  clear() {\r\n    this.setState({ user: initialState.user });\r\n  }\r\n  // function utilisé pour additionner un neuvel utilisateur et modifier un utilisateur qui existe\r\n  save() {\r\n    const user = this.state.user;\r\n    const method = user.id ? \"put\" : \"post\"; //Si il y a un id = put pour modifier, sinon post pour créer\r\n    const url = user.id ? `${baseUrl}/${user.id}` : baseUrl; // Si put passer le id à url\r\n    axios[method](url, user).then((resp) => {\r\n      const list = this.getUpdatedList(resp.data); //rest.data = utilisateur obtenu à partir du json server\r\n      this.setState({ user: initialState.user, list });\r\n    });\r\n  }\r\n\r\n  getUpdatedList(user, add = true) {\r\n    // function qui reçoive le utilisateur obtenue de data.json ou du backend\r\n    const list = this.state.list.filter((u) => u.id !== user.id); //filter créa une nouvelle liste\r\n    if (add) list.unshift(user); //unshift met un élement obtenue dans la premiàre position de la liste/array\r\n    return list;\r\n  }\r\n\r\n  updateField(event) {\r\n    const user = { ...this.state.user };\r\n    user[event.target.name] = event.target.value;\r\n    this.setState({ user });\r\n  }\r\n\r\n  renderForm() {\r\n    return (\r\n      <div className=\"form\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 col-md-6\">\r\n            <div className=\"form-group\">\r\n              <label>Nom</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"nom\"\r\n                value={this.state.user.nom}\r\n                onChange={(e) => this.updateField(e)}\r\n                placeholder=\"Digitez votre nom...\"\r\n                title=\"input1\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-12 col-md-6\">\r\n            <div className=\"form-group\">\r\n              <label>Domaine</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"domaine\"\r\n                value={this.state.user.domaine}\r\n                onChange={(e) => this.updateField(e)}\r\n                placeholder=\"Digitez votre domaine...\"\r\n                title=\"input2\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-12 col-md-6\">\r\n            <div className=\"form-group\">\r\n              <label>Exeperience</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"experience\"\r\n                value={this.state.user.experience}\r\n                onChange={(e) => this.updateField(e)}\r\n                placeholder=\"Informez si vous avez d'expérience...\"\r\n                title=\"input3\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-12 col-md-6\">\r\n            <div className=\"form-group\">\r\n              <label>Motivation</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"motivation\"\r\n                value={this.state.user.motivation}\r\n                onChange={(e) => this.updateField(e)}\r\n                placeholder=\"Quel est votre motivation...\"\r\n                title=\"input4\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-12 col-md-6\">\r\n            <div className=\"form-group\">\r\n              <label>E-mail</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"email\"\r\n                value={this.state.user.email}\r\n                onChange={(e) => this.updateField(e)}\r\n                placeholder=\"Digitez votre courriel...\"\r\n                title=\"input5\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <hr />\r\n        <div className=\"row\">\r\n          <div className=\"col-12 d-flex justify-content-center\">\r\n            <button\r\n              className=\"btn btn-custom btn-lg\"\r\n              onClick={(e) => this.save(e)}\r\n            >\r\n              Soumettre\r\n            </button>\r\n\r\n            <button\r\n              className=\"btn btn-custom-warm btn-lg ml-2\"\r\n              onClick={(e) => this.clear(e)}\r\n            >\r\n              Annuler\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  load(user) {\r\n    this.setState({ user });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div id=\"ajouter-stage\">\r\n          <div className=\"container mt-3\">\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <h2>Enregistrement d'un nouvel utilisateur</h2>\r\n              </div>\r\n              <div className=\"col-12\">{this.renderForm()}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}